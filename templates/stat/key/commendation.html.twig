<div class="row row-cols-2">
	{% for c in stat.data %}
		<div class="col">
			<div class="card text-center mb-2" id="{{c.id}}">
				<div class="card-header d-flex justify-content-between align-items-center">
					<span><i class="fa-solid fa-award text-yellow"></i>
					Official Nanotrasen Commendation</span>

                    <a href="#" class="btn btn-sm btn-secondary screenshot" title="Download a copy of this commendation!" data-html2canvas-ignore><i class="fa-solid fa-camera"></i></a>
				</div>
				<div class="card-body">
					<h4 class="card-title">
						<em>{{c.medal|title}}</em>
					</h4><br>is awarded to
					<br><h4 class="mt-4">{{c.commendee}}</h4>
					<p class="card-text"></p>
					<p>&mdash; For &mdash;</p>
					<p>"{{c.reason}}"</p>
					<footer class="blockquote-footer">Awarded by
						<cite>{{c.commender}}</cite>
					</footer>
				</p>
			</div>
			{% if round %}
				<div class="card-footer d-flex justify-content-between align-items-center visually-hidden">
					<span>From Round
						<i class="fas fa-circle"></i>
						{{round}}
						on
						{{server}}</span>
					<span style="font-size: .5rem" class="text-end">This Commendation
						<br>Certified By statbus.space</span>
				</div>
			{% endif %}
		</div>
	</div>
{% endfor %}</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" integrity="sha512-BNaRQnYJYiPSqHHDb58B0yaPfCu+Wgds8Gp/gU33kqBtgNS4tSPHuGibyoeqMV/TJlSKda6FXzoEyYGjTe+vXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
		<script>
    
    const cameras = document.querySelectorAll('.screenshot');
    cameras.forEach((c) => {
    c.addEventListener('click',function(e){
        e.preventDefault();
        const footer = c.parentElement.parentElement.querySelector('.card-footer')
        footer.classList.toggle('visually-hidden')
        html2canvas(c.parentElement.parentElement).then(function(canvas){
          canvas.classList.toggle('visually-hidden')
          document.body.appendChild(canvas)
          saveAs(canvas.toDataURL(),'commendation.png')
        })
        footer.classList.toggle('visually-hidden')
      })
    })
    function saveAs(uri, filename) {
        var link = document.createElement('a');
        if (typeof link.download === 'string') {
          link.href = uri;
          link.download = filename;

          //Firefox requires the link to be in the body
          document.body.appendChild(link);

          //simulate click
          link.click();

          //remove the link when done
          document.body.removeChild(link);
        } else {
          window.open(uri);
        }
      }

    
    </script>