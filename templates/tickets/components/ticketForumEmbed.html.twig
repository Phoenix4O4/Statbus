<div class="card mt-2">
    <div class="card-header fw-bold">Share on the Forums</div>
    <div class="card-body d-grid gap-2">
<textarea class="forum-text-content visually-hidden">
{% if not ticket[0].getRecipientBadge %}
	{% set blue = ticket[0].getSenderBadge.getCkey() %}
{% else %}
	{% set blue = ticket[0].getRecipientBadge.getCkey() %}
{% endif %}
[b]From Ticket #{{ticket[0].getTicket}} during round [url={{full_url_for('round.single',{id:ticket[0].getRound})}}]{{ticket[0].getRound}}[/url] on {{ticket[0].getServer.getIdentifier}}:[/b]

---- [i] Log Begins [/i] ----
{% for t in ticket %}
{{t.timestamp|date('Y-m-d H:i:s')}}: {% if t.getAction.isAction or 'Interaction' == t.getAction.value %} {{t.message}}
{% elseif blue == t.getSenderBadge.getCkey() %}
[color=#0000FF]{{t.getAction.value}} {{t.getAction.verb}} {{t.getSenderBadge.getCkey()}}: {{t.message}}[/color]
{% else %}
[color=#FF0000]{{t.getAction.value}} {{t.getAction.verb}} {{t.getSenderBadge.getCkey()}}: {{t.message}}[/color]
{% endif %}
{% endfor %}
---- [i] No Further Messages [/i] ----

This ticket can be viewed:[list]
[*] By the affected player: [url]{{full_url_for('user.ticket',{round: ticket[0].getRound,ticket:ticket[0].getTicket})}}[/url]
[*]By admins: [url]{{full_url_for('tgdb.ticket',{round: ticket[0].getRound,ticket:ticket[0].getTicket})}}[/url][/list]
[size=50]This ticket was generated by [url=https://statbus.space/]{{app.name}}[/url] v.{{app.version}}[/size]
</textarea>
<a class="btn btn-secondary forum-copy-btn" href="#" title="Click to copy"><i class="fas fa-copy"></i> Copy Forum Embed Code</a>
</div>
</div>

<script>
    var forumCopyButton = document.querySelector('.forum-copy-btn')
    var forumTextArea = document.querySelector('.forum-text-content')
    var forumTextContent = forumTextArea.value
    forumCopyButton.addEventListener('click',function(e){
        e.preventDefault()
        window.navigator.clipboard.writeText(forumTextContent)
    })
</script>