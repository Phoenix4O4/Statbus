{% extends 'base/index.html.twig' %}
{% block body %}
	{% from 'macros/badge.html.twig' import PlayerBadge, BanBadge, ServerBadge, RoundBadge %}
		<nav aria-label="breadcrumb">
		<ol class="breadcrumb">
			<li class="breadcrumb-item">
				<a href="{{url_for('home')}}">Home</a>
			</li>
			<li class="breadcrumb-item">
				<a href="{{url_for('user.tickets')}}">My Tickets</a>
			</li>
			<li class="breadcrumb-item active" aria-current="page">
				<i class="fas fa-circle"></i>
				{{ticket[0].getRound}}</li>
			<li class="breadcrumb-item active" aria-current="page">
				<i class="fas fa-ticket"></i>
				{{ticket[0].getTicket}}</li>
		</ol>
	</nav>
	<div class="card">
		<h3 class="card-header">
			Ticket #{{ticket[0].getTicket}}
			on round
			{{RoundBadge(ticket[0].getRound)}}
			{{ticket[0].isUrgent ? '<span class="badge text-bg-danger">URGENT!</span>'}}
		</h3>
		<div class="card-body">
			<div class="row">
				<div class="col-md-8">
					{% for t in ticket %}
						{% if t.getAction.isAction %}
							{% include 'tickets/components/ticketAction.html.twig' %}
						{% else %}
							{% include 'tickets/components/ticketBody.html.twig' %}
						{% endif %}
						{% if not loop.last %}
							<div class="ticket-timeline border-start border-2 py-3 text-end">
							{% set diff = ticket[loop.index].getTimestamp.diff(t.getTimestamp) %}
							<code>{{diff|date('%H:%I:%S')}}</code>
							</div>
						{% endif %}
					{% endfor %}
				</div>
				{% include 'tickets/components/ticketSidebar.html.twig' %}
			</div>
			{% include 'tickets/components/ticketForumEmbed.html.twig' %}
		</div>
	</div>
{% endblock %}
